# Web 端提示词润色规则 (Webrule)

本文档总结了将 Anthropic XML 标签格式的提示词转换为适合 Web 端（如 Google Gemini Gems、ChatGPT GPTs 等）使用的润色规则。

> **来源说明**：Google 官方没有公开详细的 Gems 提示词格式规范，仅提供高层级建议。本规则通过对比 Gemini Gems 润色结果与 [Anthropic 官方提示词库准则](https://docs.anthropic.com/en/prompt-library/library) 的原版格式，逆向总结而成。

---

## 核心转换原则

| Anthropic XML 格式 | Web 端格式 | 说明 |
|-------------------|------------|------|
| `<role>` | **角色开场句** | "你将扮演'角色名'..." 或 "You are a..." |
| `<task>` | **目的与目标** | Purpose and Goals，星号列表 |
| `<thinking>` | **内部思考框架** | 简化为一行，括号标注"不直接输出" |
| `<instructions>` | **行为准则** | Behaviors and Rules，双层编号 `1) a)` |
| `<output_format>` | **输出格式/模板要求** | 描述性说明或简化模板 |
| `<constraints>` | **语言与态度** | 合并约束 + 添加性格描述 |
| `<example>` | 省略 | Web 端字符限制，通常删除 |

---

## 第一部分：结构转换规则

### 1. 角色定义 (Role)

**三种开场变体：**

| 场景 | 开场句式 | 示例 |
|------|----------|------|
| 专业角色（中文） | 你将扮演'[角色名]'，一位... | 你将扮演'学术专家'，一位世界顶尖的... |
| 通用助手（中文） | 你是一名... | 你是一名具备深层推理能力的增强型AI助手 |
| 英文提示词 | You are a [role]... | You are a top expert in deep learning... |

**转换规则：**
- 移除 `<role>` 标签
- 角色名用**单引号**包裹：`'学术专家'`
- 核心能力描述紧随角色名之后，用自然语言串联
- 不换行，保持为一个连贯段落

---

### 2. 任务声明 (Task → 目的与目标)

**标题变体：**
- 中文：`目的与目标：` 或 `角色定位与目标：`
- 英文：`Purpose and Goals:`

**格式要求：**
```
目的与目标：
* 第一个目标，简洁明了。
* 第二个目标，独立成行。
* 第三个目标，以句号结尾。
```

**转换规则：**
- 使用星号 `*` 作为列表符号（非 `-`）
- 将段落拆分为独立目标点
- 每个目标以句号结尾
- 通常 2-4 个目标点

---

### 3. 思考框架 (Thinking → 内部思考框架)

**两种处理方式：**

**方式A：作为行为准则的最后一项（推荐）**
```
4) 内部思考框架 (不直接输出)：
    - 意图识别、知识边界确认、方案评估、证据链条构建。
```

**方式B：作为行为准则的第一项（英文版常用）**
```
1) Internal Analysis (Do not output directly):
   a) Architecture Restoration: Extract core model structure.
   b) Innovation Positioning: Identify key contributions.
```

**转换规则：**
- **大幅简化**：将 4 点详细框架压缩为一行关键词
- **括号标注**：必须添加 `(不直接输出)` 或 `(Do not output directly)`
- **关键词化**：用顿号分隔短语，如 `意图识别、知识边界、方案评估`
- 不再作为独立部分，而是合并到"行为准则"中

---

### 4. 指令 (Instructions → 行为准则)

**标题变体：**
- 中文：`行为准则：` 或 `行为准则与规则：`
- 英文：`Behaviors and Rules:`

**双层编号系统：**
```
行为准则：
1) 深度解析：
    a) 对用户上传的代码、论文或数据文件，进行逐行、逐段的深度阅读与解析。
    b) 识别用户真实需求是复现、改进还是创新。
2) 联网验证 (ReAct 模式)：
    a) 对于每一个事实性陈述、技术方案或引用，必须进行联网搜索验证。
    b) 显式展示分析过程和验证结果。如果搜索显示某方向不可行，必须直接指出。
3) 方案推导：
    a) 提供 2-3 套具备创新性 (Novelty) 的可行方案（稳健型、进阶型、探索型）。
    b) 逐步推导理论依据，平衡创新性与可行性，并评估潜在风险。
```

**转换规则：**
- 主编号：`1)` `2)` `3)` — 使用**右括号**，非句点
- 子编号：`a)` `b)` `c)` — 使用**右括号**
- 缩进：子项相对主项缩进 **4 个空格**
- 每行以**句号**结尾
- 按功能**分组命名**（深度解析、联网验证、方案推导）
- 技术术语用括号标注：`(ReAct 模式)`、`(Novelty)`

---

### 5. 输出格式 (Output Format)

**标题变体：**
- 中文：`输出格式要求：` 或 `输出模板要求：`
- 英文：`Output Structure:`

**三种处理方式：**

**方式A：描述性说明（最常用）**
```
输出格式要求：
- 使用 Markdown 排版，代码块注明语言，公式使用 LaTeX。
- 结构包含：## 文件分析、## 联网验证、## 问题诊断、## 解决方案（方案 A/B/C）、## 推荐与下一步。
```

**方式B：按类型说明**
```
输出模板要求：
* [分析类]：包括'分析'（分步推理）和'结论'（附带证据的最终答案）。
* [事实类]：包括'回答'（直接回答）和'来源/验证'（联网搜索的证据）。
* [操作类]：包括'步骤'（1, 2, 3...）和'注意事项'（重要考量）。
```

**方式C：保留结构，移除占位符（英文版）**
```
Output Structure:
### Level 1: 整体架构图 (Overall Architecture)
**用途**: 论文 Figure 1 或 Figure 2
**风格建议**: 2.5D Isometric / 2D 平面图，白色背景
```text
[English Prompt]
```
```

**转换规则：**
- 移除完整的 Markdown 模板
- 改为列出必须包含的**章节名称**
- 格式规范（Markdown、LaTeX）单独说明
- 如果原模板有特殊结构（如三级输出），可保留但移除 `[占位符]`

---

### 6. 约束条件 (Constraints → 语言与态度)

**标题：** `语言与态度：`

**标准结构：**
```
语言与态度：
- 使用中文回答，专业术语保留英文原文并附中文解释。
- 严谨诚实，严禁编造论文、数据或实验结果。不确定时明确说明。
- 语气专业、客观且富有启发性。
```

**转换规则：**
- 将分散的约束条件**合并为流畅句子**
- **必须添加性格/语气描述**（这是 Web 端润色的关键特征）
- 使用短横 `-` 作为列表符号
- 每条以句号结尾

**性格描述示例：**
| 角色类型 | 性格描述 |
|----------|----------|
| 学术专家 | 语气专业、客观且富有启发性 |
| AI 助手 | 表现出专业、可靠且逻辑严密的性格特征 |
| 导师型 | 像一位导师一样，在提供技术支持的同时引导用户思维 |
| 教练型 | 耐心、鼓励、循循善诱 |

---

### 7. 示例 (Example)

**处理方式：完全删除**

Web 端界面通常有字符限制（如 Gemini Gems），示例是首先被删除的部分。

如果必须保留，简化为一句话：
```
如需示例，可要求提供。
```

---

## 第二部分：格式细节规则

### 1. 标点符号规范

| 元素 | 规范 |
|------|------|
| 角色名 | 单引号包裹：`'学术专家'` |
| 技术术语 | 单引号包裹：`'费曼学习法'` |
| 功能标注 | 圆括号：`(ReAct 模式)`、`(不直接输出)` |
| 列表结尾 | 必须以**句号**结尾 |
| 英文术语 | 保留原文：`Novelty`、`SOTA` |

### 2. 列表符号选择

| 场景 | 符号 | 示例 |
|------|------|------|
| 目的与目标 | `*` | `* 辅助用户进行高水平研究。` |
| 行为准则（主） | `1)` | `1) 深度解析：` |
| 行为准则（子） | `a)` | `a) 对用户上传的代码...` |
| 约束/备注 | `-` | `- 使用中文回答。` |

### 3. 缩进规范

```
行为准则：
1) 主规则标题：
    a) 子规则内容，缩进4个空格。
    b) 另一条子规则。
2) 另一个主规则：
    a) 对应的子规则。
```

---

## 第三部分：中英文差异

### 中文提示词标题

```
你将扮演'[角色名]'，...

目的与目标：
* ...

行为准则：
1) ...
    a) ...

输出格式要求：
- ...

语言与态度：
- ...
```

### 英文提示词标题

```
Role and Expertise:
* You are a...
* Your core ability is...

Purpose and Goals:
* Your task is to...

Behaviors and Rules:
1) Internal Analysis (Do not output directly):
   a) ...
2) Generation Guidelines:
   a) ...
3) Constraints:
   a) ...

Output Structure:
...
```

**关键差异：**
- 英文版 `Constraints` 可作为 `Behaviors and Rules` 的子项
- 英文版 `thinking` 通常放在规则的第一项
- 英文版使用冒号 `:` 而非中文冒号 `：`

---

## 第四部分：完整转换示例

### 原版 (Anthropic XML)

```xml
<role>
你是一位世界顶尖的计算机科学与人工智能领域的科研专家。
你具备深厚的学术背景、严谨的科学态度以及极强的工程落地能力。
你擅长使用"费曼学习法"将复杂概念转化为易于理解的语言。
</role>

<task>
你的任务是辅助用户进行高水平的学术研究、代码分析及模型优化。
当涉及模型优化或架构改动时，目标是辅助用户发表一篇高质量的学术论文。
</task>

<thinking>
面对复杂的科研问题时，你的内部思考框架如下：

1. **意图识别**：用户的真实需求是什么？是复现、改进还是创新？
2. **知识边界**：哪些信息需要联网验证？哪些可能存在过时风险？
3. **方案评估**：如何平衡创新性与可行性？有哪些潜在风险？
4. **证据链条**：我的建议是否有充分的理论或实验支撑？

注意：此思考过程为内部推理，不直接输出给用户。
</thinking>

<instructions>
1. 对用户上传的代码、论文或数据文件，进行逐行、逐段的深度阅读与解析
2. 对于每一个事实性陈述、技术方案或引用，必须进行联网搜索验证（ReAct 模式）
3. 在正式回答中，显式展示你的分析过程和验证结果
4. 提供 2-3 套具备创新性 (Novelty) 的可行方案，并逐步推导理论依据
5. 如果搜索结果显示某个方向不可行，必须直接指出
</instructions>

<output_format>
## 文件分析
[对用户文件的核心内容进行总结]

## 联网验证
- **搜索关键词**：[实际搜索的内容]
- **验证结果**：[搜索发现的关键信息及来源]

## 问题诊断
[识别出的核心问题或痛点]

## 解决方案
### 方案 A：[名称] (稳健型)
- **核心思路**：[简要说明]
- **理论依据**：[论文/方法来源]
- **创新点**：[与现有方法的差异]
- **风险评估**：[潜在问题]

### 方案 B：[名称] (进阶型)
[同上结构]

### 方案 C：[名称] (探索型)
[同上结构]

## 推荐与下一步
[基于用户场景的推荐选择及具体行动项]
</output_format>

<constraints>
- 语言：使用中文回答，专业术语保留英文原文并附中文解释
- 态度：严谨诚实，不确定时明确说明，搜索结果与预期冲突时以证据为准
- 格式：Markdown 排版，代码块注明语言，公式使用 LaTeX
- 底线：严禁编造论文、数据或实验结果
</constraints>

<example>
[完整示例内容...]
</example>
```

### 润色后 (Web 端 / Gemini Gems)

```
你将扮演'学术专家'，一位世界顶尖的计算机科学与人工智能领域的科研专家。你具备深厚的学术背景、严谨的科学态度以及极强的工程落地能力。

目的与目标：
* 辅助用户进行高水平的学术研究、代码分析及模型优化。
* 运用'费曼学习法'将复杂概念转化为易于理解的语言，同时保证学术准确性。
* 针对模型优化或架构改动，辅助用户发表高质量学术论文。

行为准则：
1) 深度解析：
    a) 对用户上传的代码、论文或数据文件，进行逐行、逐段的深度阅读与解析。
    b) 识别用户真实需求是复现、改进还是创新。
2) 联网验证 (ReAct 模式)：
    a) 对于每一个事实性陈述、技术方案或引用，必须进行联网搜索验证。
    b) 显式展示分析过程和验证结果。如果搜索显示某方向不可行，必须直接指出。
3) 方案推导：
    a) 提供 2-3 套具备创新性 (Novelty) 的可行方案（稳健型、进阶型、探索型）。
    b) 逐步推导理论依据，平衡创新性与可行性，并评估潜在风险。
4) 内部思考框架 (不直接输出)：
    - 意图识别、知识边界确认、方案评估、证据链条构建。

输出格式要求：
- 使用 Markdown 排版，代码块注明语言，公式使用 LaTeX。
- 结构包含：## 文件分析、## 联网验证、## 问题诊断、## 解决方案（方案 A/B/C）、## 推荐与下一步。

语言与态度：
- 使用中文回答，专业术语保留英文原文并附中文解释。
- 严谨诚实，严禁编造论文、数据或实验结果。不确定时明确说明。
- 语气专业、客观且富有启发性。
```

---

## 转换检查清单

在润色提示词时，确保完成以下转换：

### 结构转换
- [ ] 移除所有 XML 标签（`<role>`, `<task>`, `<thinking>` 等）
- [ ] 角色定义以 "你将扮演'[角色名]'..." 开头
- [ ] 任务转换为 "目的与目标：" + 星号列表
- [ ] 指令转换为 "行为准则：" + 双层编号 `1) a)`
- [ ] `<thinking>` 简化为一行，标注 "(不直接输出)"
- [ ] 输出格式简化为描述性说明
- [ ] 约束条件合并到 "语言与态度："
- [ ] 删除示例部分

### 格式细节
- [ ] 使用正确的列表符号（`*` / `1)` / `a)` / `-`）
- [ ] 子项缩进 4 个空格
- [ ] 每个要点以句号结尾
- [ ] 角色名和技术术语用单引号包裹
- [ ] 功能标注用圆括号

### 内容增强
- [ ] 添加性格/语气描述（专业、客观、严谨等）
- [ ] 将分散的约束合并为流畅句子
- [ ] 按功能对规则分组命名

---

## 参考资源

- [Google Gemini Gems 官方指南](https://support.google.com/gemini/answer/15235603) - 基础创建说明
- [Google Blog: How to use Gems](https://blog.google/products/gemini/google-gems-tips/) - 使用技巧
- [Anthropic Prompt Library](https://docs.anthropic.com/en/prompt-library/library) - 原版格式参考
